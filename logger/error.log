{"body":{"secondsInterval":8},"ip":"::1","level":"error","message":"Received unexpected response code","method":"POST","path":"/api/v1/publish/polling","stack":["at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","at endReadableNT (node:internal/streams/readable:1408:12)","at IncomingMessage.emit (node:events:526:35)","at IncomingMessage.<anonymous> (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\web-push-lib.js:378:20)"],"timestamp":"2023-11-20T09:28:36.880Z"}
{"body":{},"ip":"::1","level":"error","message":"The subscription auth key should be at least 16 bytes long","method":"GET","path":"/api/v1/test_endpoint","stack":["at newFn (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\express-async-errors@3.1.1_express@4.18.2\\node_modules\\express-async-errors\\index.js:16:20)","at D:\\Work\\chh-push-notification\\dist\\app.js:62:54","at __awaiter (D:\\Work\\chh-push-notification\\dist\\app.js:4:12)","at new Promise (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\app.js:8:71","at Generator.next (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\app.js:65:53","at WebPushLib.sendNotification (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\web-push-lib.js:341:29)","at WebPushLib.generateRequestDetails (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\web-push-lib.js:244:10)","at Object.encrypt (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\encryption-helper.js:28:11)"],"timestamp":"2023-11-20T09:45:39.389Z"}
{"body":{},"ip":"::1","level":"error","message":"Received unexpected response code","method":"GET","path":"/api/v1/test_endpoint","stack":["at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","at endReadableNT (node:internal/streams/readable:1408:12)","at IncomingMessage.emit (node:events:526:35)","at IncomingMessage.<anonymous> (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\web-push-lib.js:378:20)"],"timestamp":"2023-11-20T09:46:34.525Z"}
{"body":{},"ip":"::1","level":"error","message":"The subscription p256dh value should be 65 bytes long.","method":"GET","path":"/api/v1/test_endpoint","stack":["at newFn (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\express-async-errors@3.1.1_express@4.18.2\\node_modules\\express-async-errors\\index.js:16:20)","at D:\\Work\\chh-push-notification\\dist\\app.js:62:54","at __awaiter (D:\\Work\\chh-push-notification\\dist\\app.js:4:12)","at new Promise (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\app.js:8:71","at Generator.next (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\app.js:65:53","at WebPushLib.sendNotification (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\web-push-lib.js:341:29)","at WebPushLib.generateRequestDetails (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\web-push-lib.js:244:10)","at Object.encrypt (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\encryption-helper.js:16:11)"],"timestamp":"2023-11-21T07:33:46.347Z"}
{"body":{"secondsInterval":3},"ip":"::1","level":"error","message":"Received unexpected response code","method":"POST","path":"/api/v1/publish/polling","stack":["at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","at endReadableNT (node:internal/streams/readable:1408:12)","at IncomingMessage.emit (node:events:526:35)","at IncomingMessage.<anonymous> (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\web-push@3.6.6\\node_modules\\web-push\\src\\web-push-lib.js:378:20)"],"timestamp":"2023-11-21T08:58:51.999Z"}
{"body":{"appReceiver":"","message":"foobarbaz","messageType":"pf","recipientId":"123456789123"},"ip":"::1","level":"error","message":"Notification validation failed: appReceiver: Path `appReceiver` is required.","method":"POST","path":"/api/v1/notification","stack":["at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","at D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\schematype.js:1368:9","at D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\document.js:2976:17","at Document.invalidate (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\document.js:3183:32)"],"timestamp":"2023-11-23T08:51:19.382Z"}
{"body":{"secondsInterval":8},"ip":"::1","level":"error","message":"jwt expired","method":"POST","path":"/api/v1/publish/polling","stack":["at newFn (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\express-async-errors@3.1.1_express@4.18.2\\node_modules\\express-async-errors\\index.js:16:20)","at authenticate (D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:20:12)","at __awaiter (D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:4:12)","at new Promise (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:8:71","at Generator.next (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:32:52","at module.exports [as verify] (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:101:10)","at getSecret (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:97:14)","at D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:190:21"],"timestamp":"2023-11-29T00:23:13.396Z"}
{"body":{"secondsInterval":8},"ip":"::1","level":"error","message":"jwt expired","method":"POST","path":"/api/v1/publish/polling","stack":["at newFn (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\express-async-errors@3.1.1_express@4.18.2\\node_modules\\express-async-errors\\index.js:16:20)","at authenticate (D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:20:12)","at __awaiter (D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:4:12)","at new Promise (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:8:71","at Generator.next (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:32:52","at module.exports [as verify] (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:101:10)","at getSecret (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:97:14)","at D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:190:21"],"timestamp":"2023-11-29T00:23:49.512Z"}
{"body":{"secondsInterval":8},"ip":"::1","level":"error","message":"jwt expired","method":"POST","path":"/api/v1/publish/polling","stack":["at newFn (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\express-async-errors@3.1.1_express@4.18.2\\node_modules\\express-async-errors\\index.js:16:20)","at authenticate (D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:20:12)","at __awaiter (D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:4:12)","at new Promise (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:8:71","at Generator.next (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:33:52","at module.exports [as verify] (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:101:10)","at getSecret (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:97:14)","at D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:190:21"],"timestamp":"2023-11-29T00:24:29.934Z"}
{"body":{"secondsInterval":8},"ip":"::1","level":"error","message":"jwt expired","method":"POST","path":"/api/v1/publish/polling","stack":["at newFn (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\express-async-errors@3.1.1_express@4.18.2\\node_modules\\express-async-errors\\index.js:16:20)","at authenticate (D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:20:12)","at __awaiter (D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:4:12)","at new Promise (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:8:71","at Generator.next (<anonymous>)","at D:\\Work\\chh-push-notification\\dist\\middlewares\\authentication.js:33:52","at module.exports [as verify] (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:101:10)","at getSecret (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:97:14)","at D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\jsonwebtoken@9.0.2\\node_modules\\jsonwebtoken\\verify.js:190:21"],"timestamp":"2023-11-29T00:25:47.059Z"}
{"body":{},"ip":"::1","level":"error","message":"Cast to ObjectId failed for value \"655f3ff315a5aab59663\" (type string) at path \"_id\" for model \"Notification\"","method":"PATCH","path":"/api/v1/notification/655f3ff315a5aab59663","stack":["at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","at model.Query.exec (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\query.js:4429:28)","at model.Query._findOneAndUpdate (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\query.js:3303:8)","at Query._castConditions (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\query.js:2232:10)","at Query.cast (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\query.js:4909:12)","at cast (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\cast.js:375:32)","at SchemaType.castForQuery (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\schematype.js:1633:15)","at SchemaType.applySetters (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\schematype.js:1219:12)","at ObjectId.cast (D:\\Work\\chh-push-notification\\node_modules\\.pnpm\\mongoose@7.6.4\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)"],"timestamp":"2023-12-11T09:22:08.154Z"}
{"body":{},"ip":"::1","level":"error","message":"Expected ',' or '}' after property value in JSON at position 25","method":"POST","path":"/api/v1/notification/stats/test","stack":["at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","at endReadableNT (node:internal/streams/readable:1408:12)","at IncomingMessage.emit (node:events:514:28)","at IncomingMessage.onEnd (/home/anon/projects/chh-push-notification/node_modules/.pnpm/raw-body@2.5.1/node_modules/raw-body/index.js:280:7)","at done (/home/anon/projects/chh-push-notification/node_modules/.pnpm/raw-body@2.5.1/node_modules/raw-body/index.js:220:7)","at invokeCallback (/home/anon/projects/chh-push-notification/node_modules/.pnpm/raw-body@2.5.1/node_modules/raw-body/index.js:231:16)","at AsyncResource.runInAsyncScope (node:async_hooks:206:9)","at /home/anon/projects/chh-push-notification/node_modules/.pnpm/body-parser@1.20.1/node_modules/body-parser/lib/read.js:128:18","at parse (/home/anon/projects/chh-push-notification/node_modules/.pnpm/body-parser@1.20.1/node_modules/body-parser/lib/types/json.js:89:19)","at JSON.parse (<anonymous>)"],"timestamp":"2023-12-13T09:11:06.872Z"}
{"body":{},"ip":"::1","level":"error","message":"PlanExecutor error during aggregation :: caused by :: $arrayToObject requires an array of key-value pairs, where the key must be of type string. Found key type: int","method":"POST","path":"/api/v1/notification/stats/2023-12-09T16:00:00.000Z","stack":["at TLSSocket.emit (node:events:514:28)","at TLSSocket.ondata (node:internal/streams/readable:817:22)","at Writable.write (node:internal/streams/writable:393:10)","at _write (node:internal/streams/writable:389:10)","at writeOrBuffer (node:internal/streams/writable:447:12)","at MessageStream._write (/home/anon/projects/chh-push-notification/node_modules/.pnpm/mongodb@5.9.0/node_modules/mongodb/lib/cmap/message_stream.js:33:9)","at processIncomingData (/home/anon/projects/chh-push-notification/node_modules/.pnpm/mongodb@5.9.0/node_modules/mongodb/lib/cmap/message_stream.js:124:16)","at MessageStream.emit (node:events:514:28)","at MessageStream.<anonymous> (/home/anon/projects/chh-push-notification/node_modules/.pnpm/mongodb@5.9.0/node_modules/mongodb/lib/cmap/connection.js:61:60)","at Connection.onMessage (/home/anon/projects/chh-push-notification/node_modules/.pnpm/mongodb@5.9.0/node_modules/mongodb/lib/cmap/connection.js:202:26)"],"timestamp":"2023-12-13T09:20:36.771Z"}
